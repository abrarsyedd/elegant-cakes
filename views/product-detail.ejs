<%- include('header') %>
<div class="container">
    <div class="product-detail">
        <div>
            <img src="<%= product.image_url %>" alt="<%= product.name %>" class="product-detail-image">
        </div>
        <div class="product-detail-info">
            <div class="product-category"><%= product.category %></div>
            <h1><%= product.name %></h1>
            <div class="product-detail-price">$<%= product.price.toFixed(2) %></div>
            <p class="product-detail-description"><%= product.description %></p>
            
            <div class="quantity-selector">
                <label for="quantity">Quantity:</label>
                <input type="number" id="quantity" class="form-control" value="1" min="1" max="<%= product.stock_quantity %>" style="width: 100px;">
            </div>
            
            <% if (product.stock_quantity > 0) { %>
                <button class="btn btn-primary" onclick="addToCart('<%= product.id %>', document.getElementById('quantity').value)" style="padding: 1rem 2.5rem; font-size: 1.1rem; margin-bottom: 1rem;">
                    ðŸ›’ Add to Cart
                </button>
                <p style="color: #6c757d; margin-top: 1rem;">
                    <strong>In Stock:</strong> <%= product.stock_quantity %> available
                </p>
            <% } else { %>
                <button class="btn btn-secondary" disabled style="padding: 1rem 2.5rem; font-size: 1.1rem;">Out of Stock</button>
            <% } %>
        </div>
    </div>
    
    <% if (relatedProducts.length > 0) { %>
        <div style="margin-top: 4rem;">
            <h2 class="section-title">You May Also Like</h2>
            <div class="product-grid">
                <% relatedProducts.forEach(function(product) { %>
                    <div class="product-card" onclick="window.location.href='/product/<%= product.id %>'">
                        <img src="<%= product.image_url %>" alt="<%= product.name %>" class="product-image">
                        <div class="product-info">
                            <div class="product-category"><%= product.category %></div>
                            <h3 class="product-name"><%= product.name %></h3>
                            <p class="product-description"><%= product.description %></p>
                            <div class="product-footer">
                                <span class="product-price">$<%= product.price.toFixed(2) %></span>
                                <button class="btn btn-primary" onclick="event.stopPropagation(); addToCart('<%= product.id %>')">
                                    Add to Cart
                                </button>
                            </div>
                        </div>
                    </div>
                <% }); %>
            </div>
        </div>
    <% } %>
</div>
<%- include('footer') %>
